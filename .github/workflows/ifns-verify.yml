name: IFNS Verify
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
jobs:
  verify:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - name: Ensure single workflows directory
        run: |
          set -e
          EXTRA=$(find .github -type d -name workflows -not -path "./.github/workflows" | wc -l)
          if [ "$EXTRA" -gt 0 ]; then
            echo "Found additional .github/**/workflows directories:"
            find .github -type d -name workflows -not -path "./.github/workflows"
            exit 1
          fi
          # Ensure at least one YAML workflow exists
          ls .github/workflows/*.{yml,yaml} >/dev/null

      - name: Lint workflows with actionlint
        uses: rhysd/actionlint@v1
